"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var a in r=arguments[t])Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var defaultConfig={id:"id",parentId:"parentId",dataField:"data",childrenField:"children",throwIfOrphans:!1,rootParentIds:{"":!(exports.arrayToTree=void 0)},nestedIds:!0};function arrayToTree(e,r){var t;void 0===r&&(r={});for(var n=__assign(__assign({},defaultConfig),r),a=[],o={},s=r.throwIfOrphans?new Set:null,i=0,d=e;i<d.length;i++){var l=d[i],p=n.nestedIds?getNestedProperty(l,n.id):l[n.id],h=n.nestedIds?getNestedProperty(l,n.parentId):l[n.parentId];if(n.rootParentIds[p])throw new Error('The item array contains a node whose parentId both exists in another node and is in `rootParentIds` (`itemId`: "'+p+'", `rootParentIds`: '+Object.keys(n.rootParentIds).map(function(e){return'"'+e+'"'}).join(", ")+").");Object.prototype.hasOwnProperty.call(o,p)||(o[p]=((t={})[n.childrenField]=[],t)),s&&s.delete(p),n.dataField?o[p][n.dataField]=l:o[p]=__assign(__assign({},l),((c={})[n.childrenField]=o[p][n.childrenField],c));var c=o[p];null==h||n.rootParentIds[h]?a.push(c):(Object.prototype.hasOwnProperty.call(o,h)||(o[h]=((p={})[n.childrenField]=[],p),s&&s.add(h)),o[h][n.childrenField].push(c))}if(null!=s&&s.size)throw new Error("The items array contains orphans that point to the following parentIds: ["+Array.from(s)+"]. These parentIds do not exist in the items array. Hint: prevent orphans to result in an error by passing the following option: { throwIfOrphans: false }");return a}function getNestedProperty(e,r){return r.split(".").reduce(function(e,r){return e&&e[r]},e)}exports.arrayToTree=arrayToTree;